<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/64d58efce2.js" crossorigin="anonymous"></script>
    <title>Masuk || Daftar form</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css"
        integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<script>
    // Function to handle login
    function Masuk(event) {
        event.preventDefault();
        var userEmail = document.querySelector("input[name='email']").value;
        var userPass = document.querySelector("input[name='password']").value;
        var userType = document.querySelector("select[name='user_type']").value;

        // Retrieve stored user information from localStorage
        var storedEmail = localStorage.getItem("email");
        var storedPass = localStorage.getItem("password");
        var storedUserType = localStorage.getItem("user_type");

        if (userEmail === storedEmail && userPass === storedPass && userType === storedUserType) {
            alert("Login berhasil!");

            // Redirect based on the user type
            if (storedUserType === "farmer") {
                window.location.href = "4.berandapetani.html"; // Redirect to farmer's homepage
            } else if (storedUserType === "customer") {
                window.location.href = "7.berandapembeli.html"; // Redirect to customer's homepage
            }
        } else {
            alert("Username, password, atau jenis pengguna salah!");
        }
    }

    // Function to handle sign up
    function Daftar(event) {
        event.preventDefault();
        var newEmail = document.querySelector("input[name='email']").value;
        var newPass = document.querySelector("input[name='password']").value;
        var userType = document.querySelector("select[name='user_type']").value;

        // Save the new username, password, and user type to localStorage
        localStorage.setItem("email", newEmail);
        localStorage.setItem("password", newPass);
        localStorage.setItem("user_type", userType);

        alert("Akun berhasil dibuat, silakan login.");

        // Switch back to sign-in form
        document.querySelector(".sign-up-container").style.display = "none";
        document.querySelector(".sign-in-container").style.display = "block";
    }

    // Show Sign Up Form
    document.getElementById("signUp").addEventListener("click", function () {
        document.querySelector(".sign-in-container").style.display = "none";
        document.querySelector(".sign-up-container").style.display = "block";
    });

    // Show Sign In Form
    document.getElementById("signIn").addEventListener("click", function () {
        document.querySelector(".sign-up-container").style.display = "none";
        document.querySelector(".sign-in-container").style.display = "block";
    });
</script>


<body class="login">
    <div class="container" id="container">
        <div class="form-container sign-up-container">
            <form id="sign-up-form" onsubmit="Daftar(event)">
                <h1>Daftar Akun</h1>
                <span>Atau gunakan akun email untuk registrasi</span>
                <div class="infield">
                    <input type="text" placeholder="Nama" name="name" required />
                </div>
                <div class="infield">
                    <input type="email" placeholder="Email" id="new-email" name="email" required />
                </div>
                <div class="infield">
                    <input type="password" placeholder="Password" id="new-password" name="password" required />
                </div>
                <div class="infield">
                    <select name="user_type" id="new-user_type" required>
                        <option value="" disabled selected>Pilih Jenis Pengguna</option>
                        <option value="farmer">Petani</option>
                        <option value="customer">Customer</option>
                    </select>
                </div>
                <button type="submit">Daftar</button>
            </form>
        </div>
        <div class="form-container sign-in-container">
            <form id="sign-in-form" onsubmit="Masuk(event)">
                <h1>Masuk</h1>

                <span>atau gunakan akun Anda</span>
                <div class="infield">
                    <input type="email" id="username" placeholder="Email" name="email" required />
                </div>
                <div class="infield">
                    <input type="password" id="password" placeholder="Password" name="password" required />
                </div>
                <div class="infield">
                    <select name="user_type" id="login-user_type" required>
                        <option value="" disabled selected>Pilih Jenis Pengguna</option>
                        <option value="farmer">Petani</option>
                        <option value="customer">Customer</option>
                    </select>
                </div>
                <a href="#" class="forgot">Lupa kata sandi?</a>
                <button type="submit">Masuk</button>
            </form>
        </div>
        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-panel overlay-left">
                    <h1>Selamat Datang Kembali!</h1>
                    <p>Masuk dengan informasi pribadi Anda untuk tetap terhubung dengan kami.</p>
                    <button class="ghost" id="signIn">Masuk</button>
                </div>
                <div class="overlay-panel overlay-right">
                    <h1>Halo, Taners!</h1>
                    <p>Masukkan detail pribadi Anda dan mulai progres bersama kami.</p>
                    <button href="" class="ghost" id="signUp">Daftar</button>
                </div>
            </div>
        </div>
    </div>

    <script src="./main.js"></script>
</body>

</html>